{"ast":null,"code":"import _asyncToGenerator from\"/Users/yoonjieun/Documents/\\u1100\\u1169\\u11BC\\u1107\\u116E/jei_react_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/yoonjieun/Documents/\\u1100\\u1169\\u11BC\\u1107\\u116E/jei_react_project/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';var testClient=axios.create({baseURL:'http://localhost:3001'});var createGetRequest=function createGetRequest(url){return testClient.get(url).then(function(r){return r.data;});};var createPostRequest=function createPostRequest(url,body){return testClient.post(url,body).then(function(r){return r.data;});};var createPatchRequest=function createPatchRequest(url,body){return testClient.patch(url,body).then(function(r){return r.data;});};var createDeleteRequest=function createDeleteRequest(url){return testClient.delete(url).then(function(r){return r.data;});};if(localStorage.accessToken)testClient.defaults.headers={Authorization:\"Bearer \".concat(localStorage.accessToken)};export var postSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(googleToken){var _yield$createPostRequ,accessToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createPostRequest('sign-in',{googleToken:googleToken});case 2:_yield$createPostRequ=_context.sent;accessToken=_yield$createPostRequ.accessToken;localStorage.accessToken=accessToken;testClient.defaults.headers={Authorization:\"Bearer \".concat(accessToken)};case 6:case\"end\":return _context.stop();}}},_callee);}));return function postSignIn(_x){return _ref.apply(this,arguments);};}();export var postSignOut=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var googleSignOut;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:googleSignOut=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _window$gapi,_window$gapi$auth;var auth2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:auth2=(_window$gapi=window.gapi)===null||_window$gapi===void 0?void 0:(_window$gapi$auth=_window$gapi.auth2)===null||_window$gapi$auth===void 0?void 0:_window$gapi$auth.getAuthInstance();_context2.next=3;return auth2===null||auth2===void 0?void 0:auth2.signOut();case 3:auth2===null||auth2===void 0?void 0:auth2.disconnect();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function googleSignOut(){return _ref3.apply(this,arguments);};}();_context3.next=3;return Promise.all([createPostRequest('sign-out'),googleSignOut()]);case 3:// await createPostRequest('sign-out');\n// await googleSignOut();\nlocalStorage.removeItem('accessToken');case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function postSignOut(){return _ref2.apply(this,arguments);};}();export var getReservations=function getReservations(){return createGetRequest('reservations');};export var postReservation=function postReservation(reservation){return createPostRequest('reservation',reservation);};export var patchReservation=function patchReservation(reservation){return createPatchRequest(\"reservation/\".concat(reservation.reservationId),reservation);};//reservations.map((el) => (el.reservationId === reservation.reservationId ? reservation : el));\nexport var deleteReservation=function deleteReservation(id){return createDeleteRequest(\"reservation/\".concat(id));};//reservations.filter((el) => el.reservationId !== reservation);","map":{"version":3,"names":["axios","testClient","create","baseURL","createGetRequest","url","get","then","r","data","createPostRequest","body","post","createPatchRequest","patch","createDeleteRequest","delete","localStorage","accessToken","defaults","headers","Authorization","postSignIn","googleToken","postSignOut","googleSignOut","auth2","window","gapi","getAuthInstance","signOut","disconnect","Promise","all","removeItem","getReservations","postReservation","reservation","patchReservation","reservationId","deleteReservation","id"],"sources":["/Users/yoonjieun/Documents/공부/jei_react_project/src/apis/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst testClient = axios.create({ baseURL: 'http://localhost:3001' });\nconst createGetRequest = (url) => testClient.get(url).then((r) => r.data);\nconst createPostRequest = (url, body) => testClient.post(url, body).then((r) => r.data);\nconst createPatchRequest = (url, body) => testClient.patch(url, body).then((r) => r.data);\nconst createDeleteRequest = (url) => testClient.delete(url).then((r) => r.data);\n\nif (localStorage.accessToken) testClient.defaults.headers = { Authorization: `Bearer ${localStorage.accessToken}` };\n\nexport const postSignIn = async (googleToken) => {\n    const { accessToken } = await createPostRequest('sign-in', { googleToken });\n    localStorage.accessToken = accessToken;\n    testClient.defaults.headers = { Authorization: `Bearer ${accessToken}` };\n};\nexport const postSignOut = async () => {\n    const googleSignOut = async () => {\n        const auth2 = window.gapi?.auth2?.getAuthInstance();\n        await auth2?.signOut();\n        auth2?.disconnect();\n    };\n\n    await Promise.all([createPostRequest('sign-out'), googleSignOut()]);\n\n    // await createPostRequest('sign-out');\n    // await googleSignOut();\n\n    localStorage.removeItem('accessToken');\n};\nexport const getReservations = () => createGetRequest('reservations');\nexport const postReservation = (reservation) => createPostRequest('reservation', reservation);\n\nexport const patchReservation = (reservation) => createPatchRequest(`reservation/${reservation.reservationId}`, reservation);\n//reservations.map((el) => (el.reservationId === reservation.reservationId ? reservation : el));\n\nexport const deleteReservation = (id) => createDeleteRequest(`reservation/${id}`);\n//reservations.filter((el) => el.reservationId !== reservation);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}